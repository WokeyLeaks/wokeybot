{% extends "base.html" %} {% block content %}
<h1>
  Congratulations! You have blocked the following 'Vox' accounts:
</h1>

<!-- <pre> -->
<!-- $access_token = $_SESSION['access_token'];-->
<!-- </pre> */ -->

<pre>
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $access_token['oauth_token'], $access_token['oauth_token_secret']);
</pre>

<h2>Get account details</h2>
<p>
  At this point we will use the access token that is authorized to act as the
  user, to get their account details.
</p>

<b>Request</b>
<pre>
$user = $connection->get('account/verify_credentials', ['tweet_mode' => 'extended', 'include_entities' => 'true']);
</pre>

<b>Response <span class="label label-info">Live</span></b>
<br />
<button
  class="btn btn-default"
  type="button"
  data-toggle="collapse"
  data-target="#profile-response"
  aria-expanded="false"
  aria-controls="profile-response"
>
  View response
</button>

<pre class="collapse" id="profile-response">
{{ dump(user) }}
</pre>

<p>You now have the authenticated user's Twitter account details.</p>

<twitter-user user="{{ json_user }}"></twitter-user>

{% if user.status %}
<br />
<twitter-status status="{{ json_status }}"></twitter-status>

<p>.. And the list of blockees is...</p>

<style type="text/css">
  table    { width: 100%; background-color: #1DA1F2; color: #FFF; margin-left: auto; margin-right: auto; }
  table td { border:inset 2px #FFF; }
</style>
<table>
    {% for blockee in blockees.users %}
        <tr>
          <td style="text-align:center">@{{ blockee.screen_name }}</td>
          <td><img src="{{blockee.profile_image_url_https}}" width="30" height="30 vertical-align="middle" border-radius="50%"></td>
          <td style="text-align:center">Bio: {{ blockee.description }}</td>
          <td style="text-align:center">Followers: {{ blockee.followers_count }}</td>
        </tr>
    {% endfor %}
</table>
{% endif %} {% endblock %}
